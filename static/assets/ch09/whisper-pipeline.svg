<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 320">
  <defs>
    <linearGradient id="audioGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#00BCD4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00838F;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="whisperGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4CAF50;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2E7D32;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="textGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#9C27B0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6A1B9A;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="rosGrad9" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF5722;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D84315;stop-opacity:1" />
    </linearGradient>
    <marker id="wpArrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#333" text-anchor="middle">Whisper Speech-to-Command Pipeline</text>

  <!-- Stage 1: Audio Input -->
  <rect x="30" y="70" width="150" height="180" rx="12" fill="url(#audioGrad)"/>
  <text x="105" y="100" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Audio Input</text>

  <rect x="45" y="115" width="120" height="30" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="105" y="135" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Microphone</text>

  <rect x="45" y="155" width="120" height="30" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="105" y="175" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">16kHz Sample</text>

  <rect x="45" y="195" width="120" height="30" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="105" y="215" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">3s Chunks</text>

  <!-- Arrow -->
  <line x1="180" y1="160" x2="220" y2="160" stroke="#333" stroke-width="3" marker-end="url(#wpArrow)"/>

  <!-- Stage 2: Whisper Processing -->
  <rect x="220" y="70" width="200" height="180" rx="12" fill="url(#whisperGrad)"/>
  <text x="320" y="100" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Whisper Model</text>

  <rect x="235" y="115" width="170" height="30" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="320" y="135" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Log-Mel Spectrogram</text>

  <rect x="235" y="155" width="170" height="30" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="320" y="175" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Encoder-Decoder</text>

  <rect x="235" y="195" width="170" height="30" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="320" y="215" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">base/small/large model</text>

  <!-- Arrow -->
  <line x1="420" y1="160" x2="460" y2="160" stroke="#333" stroke-width="3" marker-end="url(#wpArrow)"/>

  <!-- Stage 3: Text Output -->
  <rect x="460" y="70" width="180" height="180" rx="12" fill="url(#textGrad)"/>
  <text x="550" y="100" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Transcription</text>

  <rect x="475" y="120" width="150" height="50" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="550" y="145" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">"Go to the kitchen</text>
  <text x="550" y="160" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">and pick up the cup"</text>

  <rect x="475" y="180" width="150" height="50" rx="5" fill="rgba(255,255,255,0.15)"/>
  <text x="550" y="200" font-family="Arial, sans-serif" font-size="9" fill="white" text-anchor="middle">Language: en</text>
  <text x="550" y="215" font-family="Arial, sans-serif" font-size="9" fill="white" text-anchor="middle">Confidence: 0.95</text>

  <!-- Arrow -->
  <line x1="640" y1="160" x2="680" y2="160" stroke="#333" stroke-width="3" marker-end="url(#wpArrow)"/>

  <!-- Stage 4: ROS 2 Topic -->
  <rect x="680" y="70" width="190" height="180" rx="12" fill="url(#rosGrad9)"/>
  <text x="775" y="100" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">ROS 2 Publish</text>

  <rect x="695" y="120" width="160" height="40" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="775" y="145" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white" text-anchor="middle">/voice_command</text>

  <rect x="695" y="170" width="160" height="30" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="775" y="190" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">std_msgs/String</text>

  <rect x="695" y="210" width="160" height="25" rx="5" fill="rgba(255,255,255,0.15)"/>
  <text x="775" y="227" font-family="Arial, sans-serif" font-size="9" fill="white" text-anchor="middle">â†’ LLM Task Planner</text>

  <!-- Bottom: Performance metrics -->
  <rect x="30" y="270" width="840" height="40" rx="8" fill="#E8F5E9" stroke="#4CAF50"/>
  <text x="450" y="295" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2E7D32" text-anchor="middle">Performance: Whisper-base ~3s latency | ~95% WER on commands | Runs on Jetson Orin | Supports 100+ languages</text>
</svg>