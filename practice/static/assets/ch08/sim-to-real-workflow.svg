<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 420">
  <defs>
    <linearGradient id="simGrad8" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#673AB7;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#4527A0;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="realGrad8" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF5722;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D84315;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="gapGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FFC107;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FF8F00;stop-opacity:1" />
    </linearGradient>
    <marker id="s2rArrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
    <marker id="loopArrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4CAF50"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#333" text-anchor="middle">Sim-to-Real Transfer Workflow</text>

  <!-- Phase 1: Simulation -->
  <rect x="30" y="60" width="250" height="300" rx="15" fill="#EDE7F6" stroke="#673AB7" stroke-width="3"/>
  <rect x="30" y="60" width="250" height="45" rx="15" fill="url(#simGrad8)"/>
  <text x="155" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Phase 1: Simulation</text>

  <rect x="50" y="120" width="210" height="45" rx="8" fill="#D1C4E9"/>
  <text x="155" y="140" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#4527A0" text-anchor="middle">Domain Randomization</text>
  <text x="155" y="155" font-family="Arial, sans-serif" font-size="9" fill="#4527A0" text-anchor="middle">Visual + Physics + Sensor</text>

  <rect x="50" y="175" width="210" height="45" rx="8" fill="#B39DDB"/>
  <text x="155" y="195" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white" text-anchor="middle">Policy Training</text>
  <text x="155" y="210" font-family="Arial, sans-serif" font-size="9" fill="white" text-anchor="middle">RL / IL / Hybrid</text>

  <rect x="50" y="230" width="210" height="45" rx="8" fill="#9575CD"/>
  <text x="155" y="250" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white" text-anchor="middle">Simulation Validation</text>
  <text x="155" y="265" font-family="Arial, sans-serif" font-size="9" fill="white" text-anchor="middle">95%+ success rate target</text>

  <rect x="50" y="285" width="210" height="60" rx="8" fill="#7E57C2"/>
  <text x="155" y="305" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white" text-anchor="middle">Metrics</text>
  <text x="155" y="320" font-family="Arial, sans-serif" font-size="9" fill="white" text-anchor="middle">Success rate, completion time</text>
  <text x="155" y="335" font-family="Arial, sans-serif" font-size="9" fill="white" text-anchor="middle">Energy usage, safety violations</text>

  <!-- Arrow to Gap Analysis -->
  <line x1="280" y1="210" x2="330" y2="210" stroke="#333" stroke-width="3" marker-end="url(#s2rArrow)"/>

  <!-- Phase 2: Gap Analysis -->
  <rect x="330" y="100" width="240" height="220" rx="15" fill="#FFF8E1" stroke="#FFC107" stroke-width="3"/>
  <rect x="330" y="100" width="240" height="45" rx="15" fill="url(#gapGrad)"/>
  <text x="450" y="130" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Phase 2: Gap Analysis</text>

  <rect x="350" y="160" width="200" height="35" rx="6" fill="#FFE082"/>
  <text x="450" y="182" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#E65100" text-anchor="middle">Identify Failure Modes</text>

  <rect x="350" y="205" width="200" height="35" rx="6" fill="#FFD54F"/>
  <text x="450" y="227" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#E65100" text-anchor="middle">Measure Performance Gap</text>

  <rect x="350" y="250" width="200" height="35" rx="6" fill="#FFCA28"/>
  <text x="450" y="272" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#E65100" text-anchor="middle">Root Cause Analysis</text>

  <rect x="350" y="295" width="200" height="15" rx="3" fill="#FFB300"/>
  <text x="450" y="306" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="white" text-anchor="middle">Gap &lt; 15%? â†’ Deploy</text>

  <!-- Arrow to Real World -->
  <line x1="570" y1="210" x2="620" y2="210" stroke="#333" stroke-width="3" marker-end="url(#s2rArrow)"/>

  <!-- Phase 3: Real World -->
  <rect x="620" y="60" width="250" height="300" rx="15" fill="#FBE9E7" stroke="#FF5722" stroke-width="3"/>
  <rect x="620" y="60" width="250" height="45" rx="15" fill="url(#realGrad8)"/>
  <text x="745" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Phase 3: Real World</text>

  <rect x="640" y="120" width="210" height="45" rx="8" fill="#FFCCBC"/>
  <text x="745" y="140" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#BF360C" text-anchor="middle">Zero-Shot Transfer</text>
  <text x="745" y="155" font-family="Arial, sans-serif" font-size="9" fill="#BF360C" text-anchor="middle">Deploy sim-trained policy</text>

  <rect x="640" y="175" width="210" height="45" rx="8" fill="#FF8A65"/>
  <text x="745" y="195" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white" text-anchor="middle">Controlled Testing</text>
  <text x="745" y="210" font-family="Arial, sans-serif" font-size="9" fill="white" text-anchor="middle">Lab environment first</text>

  <rect x="640" y="230" width="210" height="45" rx="8" fill="#FF7043"/>
  <text x="745" y="250" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white" text-anchor="middle">Fine-Tuning</text>
  <text x="745" y="265" font-family="Arial, sans-serif" font-size="9" fill="white" text-anchor="middle">Real-world adaptation</text>

  <rect x="640" y="285" width="210" height="60" rx="8" fill="#F4511E"/>
  <text x="745" y="305" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white" text-anchor="middle">Field Deployment</text>
  <text x="745" y="320" font-family="Arial, sans-serif" font-size="9" fill="white" text-anchor="middle">Monitoring + safety systems</text>
  <text x="745" y="335" font-family="Arial, sans-serif" font-size="9" fill="white" text-anchor="middle">Graceful degradation</text>

  <!-- Feedback Loop -->
  <path d="M745 360 L745 390 L155 390 L155 360" stroke="#4CAF50" stroke-width="3" fill="none" marker-end="url(#loopArrow)"/>
  <rect x="380" y="375" width="140" height="25" rx="5" fill="#C8E6C9" stroke="#4CAF50"/>
  <text x="450" y="392" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#2E7D32" text-anchor="middle">Feedback Loop</text>

  <!-- Legend -->
  <rect x="30" y="370" width="250" height="35" rx="5" fill="white" stroke="#999"/>
  <text x="155" y="392" font-family="Arial, sans-serif" font-size="10" fill="#333" text-anchor="middle">Iterate until gap &lt; acceptable threshold</text>
</svg>