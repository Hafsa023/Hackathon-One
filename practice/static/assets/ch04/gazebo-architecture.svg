<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <defs>
    <linearGradient id="physics" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4CAF50;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2E7D32;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="rendering" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#2196F3;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1565C0;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="sensors" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF9800;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#E65100;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="plugins" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#9C27B0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6A1B9A;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="ros" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#00BCD4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00838F;stop-opacity:1" />
    </linearGradient>
  </defs>

  <!-- Title -->
  <text x="400" y="35" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#333" text-anchor="middle">Gazebo Fortress Architecture</text>

  <!-- Main Gazebo Container -->
  <rect x="50" y="60" width="700" height="280" rx="15" fill="#f5f5f5" stroke="#333" stroke-width="2"/>
  <text x="400" y="90" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#333" text-anchor="middle">Gazebo Simulation Server</text>

  <!-- Physics Engine -->
  <rect x="80" y="110" width="140" height="100" rx="10" fill="url(#physics)"/>
  <text x="150" y="145" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Physics Engine</text>
  <text x="150" y="165" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">DART / Bullet / TPE</text>
  <text x="150" y="185" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Rigid Body Dynamics</text>
  <text x="150" y="200" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Collision Detection</text>

  <!-- Rendering Engine -->
  <rect x="240" y="110" width="140" height="100" rx="10" fill="url(#rendering)"/>
  <text x="310" y="145" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Rendering</text>
  <text x="310" y="165" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">Ogre2 Engine</text>
  <text x="310" y="185" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">PBR Materials</text>
  <text x="310" y="200" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Shadows / Lighting</text>

  <!-- Sensor Systems -->
  <rect x="400" y="110" width="140" height="100" rx="10" fill="url(#sensors)"/>
  <text x="470" y="145" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Sensors</text>
  <text x="470" y="165" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">GPU LiDAR</text>
  <text x="470" y="185" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Depth Camera</text>
  <text x="470" y="200" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">IMU / Contact</text>

  <!-- Plugin System -->
  <rect x="560" y="110" width="160" height="100" rx="10" fill="url(#plugins)"/>
  <text x="640" y="145" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Plugin System</text>
  <text x="640" y="165" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">System Plugins</text>
  <text x="640" y="185" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">World Plugins</text>
  <text x="640" y="200" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Model Plugins</text>

  <!-- Entity Component System -->
  <rect x="80" y="230" width="640" height="50" rx="8" fill="#E8E8E8" stroke="#666" stroke-width="1"/>
  <text x="400" y="260" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#333" text-anchor="middle">Entity-Component-System (ECS) Architecture</text>

  <!-- Transport Layer -->
  <rect x="80" y="295" width="640" height="35" rx="8" fill="#CFD8DC" stroke="#666" stroke-width="1"/>
  <text x="400" y="318" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333" text-anchor="middle">ign-transport (Internal Message Passing)</text>

  <!-- Arrow to Bridge -->
  <path d="M400 340 L400 365" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>

  <!-- ros_gz Bridge -->
  <rect x="200" y="370" width="400" height="50" rx="10" fill="url(#ros)"/>
  <text x="400" y="400" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">ros_gz Bridge (Topic/Service Translation)</text>

  <!-- Arrow to ROS 2 -->
  <path d="M400 420 L400 445" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- ROS 2 Layer -->
  <rect x="150" y="450" width="500" height="40" rx="8" fill="#263238" stroke="#333" stroke-width="1"/>
  <text x="400" y="476" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">ROS 2 Humble (DDS Middleware)</text>

  <!-- Bidirectional arrows between components -->
  <line x1="220" y1="160" x2="240" y2="160" stroke="#333" stroke-width="1.5"/>
  <line x1="380" y1="160" x2="400" y2="160" stroke="#333" stroke-width="1.5"/>
  <line x1="540" y1="160" x2="560" y2="160" stroke="#333" stroke-width="1.5"/>
</svg>